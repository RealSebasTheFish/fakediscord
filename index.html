<!DOCTYPE html>
<html>
    <head>
        <title>Fake Discord</title>
        <link rel="stylesheet" href="style.css">
        <link rel="icon" href="discord.ico">
        <link rel="stylesheet" href="css/main.css" />
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Catamaran">
        <meta name="keywords" content="discord, cool, among us baddie, sheeshy baka, sussy"/>
        <meta name="description" content="a place where you can hang out and talk to friends about whether or not traps are homo or not"/>
        <script src="https://cdn.socket.io/4.4.0/socket.io.min.js"></script>
        <script>
            var socket = io.connect('http://10.6.161.164:64758', { transports : ['websocket'] });

            socket.on('message', function(incoming) {   
                console.log("Recieved message")
                var incomingMessage = incoming["message"];
                var div = document.getElementById("firstOne").cloneNode(true);
                div.id = "";

                div.getElementsByClassName("messageContent")[0].textContent = incomingMessage;

                document.getElementById("messageDisplay").appendChild(div);
            });

            function sendMessage(){
                var messageInput = document.getElementById("textBox");
                var packet = {
                    "message": messageInput.value
                }
                socket.emit("message", packet);
                messageInput.value = "";
            }
        </script>
    </head>
    <body>
        <div id="channelList">
            <div id="logo">
                <h1>Fake Discord</h1>
            </div>
        </div>
        <div id="messages">
            <div id = "firstOne" class="message">
                <div class="messageInfo">
                    <div class="pfp"><img src="discordlogo.png"></div>
                    <div class="author"><p>John Doe</p></div>
                </div>
                <div class = "messageContent">
                    <p>This is a test message, make me look good!</p>
                </div>
            </div>
            <div id="messageDisplay">
                
            </div>
            <div id="messageInput">
                <input id="textBox" placeholder="Enter your message here"/>
            </div>
            
        </div>
    </body>
    <script>
        document.getElementById("textBox").addEventListener("keydown", function (e) {
            if (e.code === "Enter") {  //checks whether the pressed key is "Enter"
                sendMessage();
            }
        });
    </script>
</html>
